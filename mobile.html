<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>eskrev mobile</title>
    <meta name="theme-color" content="#1f1b16" />
    <link rel="manifest" href="manifest.json?v=5" />
    <link rel="icon" id="appFavicon" href="src/assets/icons/eskrev.ico" />
    <link rel="icon" type="image/png" sizes="500x500" href="src/assets/icons/eskrev.png" />
    <link rel="apple-touch-icon" href="src/assets/icons/eskrev.png" />
    <link rel="stylesheet" href="src/css/base.css" />
    <link rel="stylesheet" href="src/mobile/mobile.css" />
</head>
<body>
    <div class="mobile-shell">
        <div class="topbar">
            <div class="brand">
                <img src="src/assets/icons/logoEskrev.svg" alt="" aria-hidden="true" />
                <span>eskrev</span>
            </div>
            <button id="mobileLangToggle" class="lang-toggle">PT</button>
        </div>
        <main class="main">
            <section id="notesView" class="section hidden">
                <div class="section-title" id="notesTitle" data-i18n="notes_title">Notas</div>
                <textarea id="mobileMemoInput" class="note-input" data-i18n-ph="notes_placeholder" placeholder="Nota rápida..."></textarea>
                <input id="mobileMemoTags" class="note-tags" data-i18n-ph="notes_tags_ph" placeholder="Tags (opcional)" />
                <input id="mobileMemoFolder" class="input" data-i18n-ph="notes_folder_ph" placeholder="Pasta (opcional)" />
                <div id="fixedTags" class="fixed-tags"></div>
                <button id="btnAddMobileMemo" class="btn btn-primary" data-i18n="notes_save">SALVAR NOTA</button>
                <div class="section" style="margin-top:16px;">
                    <div class="section-title" data-i18n="export_title">Exportar</div>
                    <div class="help" data-i18n="export_hint">Exporte para levar ao desktop.</div>
                    <div class="btn-row" style="margin-top:10px;">
                        <button id="btnExportQr" class="btn btn-ghost" data-i18n="export_qr">ENVIAR POR QR</button>
                        <button id="btnExportFile" class="btn btn-ghost" data-i18n="export_file">SALVAR .SKV</button>
                    </div>
                    <button id="btnExportB64" class="btn btn-ghost" style="margin-top:10px;" data-i18n="export_b64">SALVAR .B64</button>
                </div>
                <div class="section" style="margin-top:16px;">
                    <div class="section-title">Notas</div>
                    <div id="mobileMemoList" class="note-list"></div>
                </div>
                <div class="section" style="margin-top:16px;">
                    <div class="donate" data-i18n="donate"></div>
                </div>
                <button id="btnDeleteAll" class="btn btn-ghost" style="margin-top:16px;" data-i18n="delete_all">APAGAR TUDO</button>
            </section>
        </main>
    </div>

    <div id="mobileGate" class="overlay active">
        <div class="modal">
            <div class="qr-share">
                <div class="qr-code" id="shareQrCode"></div>
                <img class="qr-logo" src="src/assets/icons/logoEskrev.svg" alt="" aria-hidden="true" />
                <div class="qr-share-label" data-i18n="gate_share">Compartilhe o eskrev</div>
            </div>
            <div class="modal-title" data-i18n="gate_title">Importar projeto</div>
            <div class="modal-body" data-i18n="gate_body"></div>
            <button id="mobileGateScan" class="btn btn-primary" data-i18n="gate_scan">LER QR CODE</button>
            <div id="mobileGateHint" class="modal-hint" data-i18n="gate_hint">Ou ↑ para criar novo</div>
        </div>
    </div>

    <div id="mobileSetup" class="overlay">
        <div class="modal">
            <div class="modal-title" data-i18n="setup_title">Criar sessão</div>
            <input id="setupProjectName" class="input" data-i18n-ph="setup_project_ph" placeholder="Nome do projeto" />
            <input id="setupPass1" class="input" type="password" data-i18n-ph="setup_pass_ph" placeholder="Senha provisória" />
            <input id="setupPass2" class="input" type="password" data-i18n-ph="setup_pass_confirm_ph" placeholder="Confirmar senha" />
            <div id="setupMsg" class="help"></div>
            <div class="btn-row">
                <button id="setupPomo25" class="btn btn-ghost" data-i18n="setup_25">25 MIN</button>
                <button id="setupPomo50" class="btn btn-ghost" data-i18n="setup_50">50 MIN</button>
            </div>
        </div>
    </div>

    <div id="importSessionModal" class="overlay">
        <div class="modal">
            <div class="modal-title" data-i18n="import_title">Projeto importado</div>
            <div id="importSessionSuccess" class="modal-body"></div>
            <input id="importSessionPass1" class="input" type="password" data-i18n-ph="setup_pass_ph" placeholder="Senha provisória" />
            <input id="importSessionPass2" class="input" type="password" data-i18n-ph="setup_pass_confirm_ph" placeholder="Confirmar senha" />
            <div id="importSessionMsg" class="help"></div>
            <button id="importSessionConfirm" class="btn btn-primary" data-i18n="import_confirm">CONFIRMAR</button>
        </div>
    </div>

    <div id="qrScanModal" class="overlay">
        <div class="modal qr-modal">
            <div class="modal-title" data-i18n="scan_title">Scan QR</div>
            <div class="qr-layout">
                <video id="qrScanVideo" class="qr-video" autoplay playsinline muted></video>
                <div class="panel">
                    <div id="qrScanStatus" class="help" data-i18n="scan_wait">Aguardando QR...</div>
                    <div class="qr-progress"><div id="qrScanProgress" class="qr-progress-fill"></div></div>
                    <div id="qrScanGrid" class="qr-grid"></div>
                    <div class="help" data-i18n="scan_fallback">Sem câmera? Importe o arquivo .b64/.skv ou cole a string.</div>
                    <button id="qrScanImport" class="btn btn-ghost" data-i18n="scan_import">IMPORTAR ARQUIVO</button>
                    <input id="qrScanFile" type="file" accept=".b64,.skv,.json,.txt" style="display:none;" />
                    <textarea id="qrScanPaste" class="note-input" data-i18n-ph="scan_paste" placeholder="Cole a string base64"></textarea>
                    <button id="qrScanRestore" class="btn btn-primary" data-i18n="scan_restore">RESTAURAR</button>
                    <button id="qrScanStop" class="btn btn-ghost" data-i18n="scan_stop">PARAR SCAN</button>
                </div>
            </div>
        </div>
    </div>

    <div id="qrStreamModal" class="overlay">
        <div class="modal qr-modal">
            <div class="modal-title" data-i18n="stream_title">Enviar por QR</div>
            <div id="qrStreamCode" class="qr-code" style="margin:0 auto;"></div>
            <div id="qrStreamStatus" class="help"></div>
            <div id="qrStreamMeta" class="help"></div>
            <div class="btn-row">
                <button id="qrStreamPause" class="btn btn-ghost" data-i18n="stream_pause">PAUSAR</button>
                <button id="qrStreamCopy" class="btn btn-ghost" data-i18n="stream_copy">COPIAR BASE64</button>
            </div>
            <button id="qrStreamSave" class="btn btn-ghost" data-i18n="stream_save">SALVAR .B64</button>
            <div class="help" data-i18n="stream_hint">Feche para encerrar o envio.</div>
            <button id="qrStreamClose" class="btn btn-primary">OK</button>
        </div>
    </div>

    <script src="src/assets/js/qrcode.min.js"></script>
    <script src="src/assets/js/jsqr.min.js"></script>
    <script src="src/assets/js/lz-string.min.js"></script>
    <script src="src/mobile/mobile.js"></script>
</body>
</html>
