/* LIT OS v3.0 - Main Stylesheet */
@import 'fonts.css';
@import 'base.css';
@import 'layout.css';
@import 'components.css';
@import 'mobile-only.css';

/* -------------------------------------------------------------------------- */
/* Stability Patch - layout/theme integrity                                   */
/* -------------------------------------------------------------------------- */
:root {
  --stb-radius: 12px;
}

body.layout-2030 {
  overflow-x: hidden;
}

/* Keep current theme variables intact; only normalize geometry and rhythm. */
body.layout-2030 .panel,
body.layout-2030 .drawer,
body.layout-2030 .notes-panel,
body.layout-2030 .modal-box,
body.layout-2030 .controls-inner {
  border-radius: var(--stb-radius);
}

/* Centering integrity for editor/books stage */
body.layout-2030 #editorView,
body.layout-2030 #booksView,
body.layout-2030 #verifyView {
  width: 100%;
}

body.layout-2030 #editorWrap {
  width: min(64ch, 100%);
  margin-left: auto;
  margin-right: auto;
}

/* Hero remains expressive but lightweight */
body.layout-2030 .logo-area .marquee-content {
  animation: eskrevHeroIn 420ms cubic-bezier(0.22, 0.61, 0.36, 1);
}

/* Desktop grid: drawer column must not reserve space when closed */
@media (min-width: 901px) {
  body.layout-2030 #frame {
    grid-template-columns: clamp(56px, 4.8vw, 68px) minmax(0, 1fr) 0;
    grid-template-rows: auto minmax(0, 1fr) auto;
  }

  body.layout-2030.drawer-open #frame {
    grid-template-columns: clamp(56px, 4.8vw, 68px) minmax(0, 1fr) clamp(280px, 23vw, 360px);
  }

  body.layout-2030 .logo-area {
    grid-column: 2 / 4;
  }

  body.layout-2030 .panel {
    grid-column: 2;
    grid-row: 2;
    padding: clamp(12px, 1.8vw, 22px) clamp(14px, 2.2vw, 28px) clamp(10px, 1.6vw, 18px);
  }

  body.layout-2030 #editorWrap {
    margin-top: clamp(56px, 12vh, 154px);
  }

  body.layout-2030 .drawer {
    grid-column: 3;
    grid-row: 1 / 4;
    width: 100%;
    transform: translateX(-10px);
    opacity: 0;
    pointer-events: none;
  }

  body.layout-2030 .drawer.open {
    transform: translateX(0);
    opacity: 1;
    pointer-events: auto;
  }

  body.layout-2030 .notes-panel {
    top: 80px;
    bottom: 80px;
    left: calc(var(--hud-w) + 8px);
    width: clamp(280px, 23vw, 360px);
  }

  body.layout-2030 .controls {
    margin-bottom: 14px;
  }

  body.layout-2030 .desktop-footer-note {
    bottom: 2px;
    opacity: 0.42;
  }
}

/* Mobile safety: preserve native mobile flow, avoid desktop overrides bleeding */
@media (max-width: 900px) {
  body.layout-2030 #editorWrap {
    width: min(92vw, 64ch);
    margin-top: 8px;
  }

  body.layout-2030 .panel {
    padding: 0 14px;
  }

  body.layout-2030 .drawer,
  body.layout-2030 .notes-panel {
    border-radius: 0;
  }
}

@keyframes eskrevHeroIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
